{"code":"// main.ts\nimport { Plugin, TFile, TFolder } from \"obsidian\";\nimport { BooxSyncSettingTab, DEFAULT_SETTINGS } from \"./settings\";\nimport { parseHighlightFile } from \"./parser\";\nexport default class BooxSync extends Plugin {\n    constructor() {\n        super(...arguments);\n        this.scanIntervalId = null;\n    }\n    async onload() {\n        console.log(\"Boox Sync plugin loading...\");\n        await this.loadSettings();\n        this.addSettingTab(new BooxSyncSettingTab(this.app, this));\n        this.startPolling();\n    }\n    onunload() {\n        this.stopPolling();\n    }\n    async loadSettings() {\n        this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());\n    }\n    async saveSettings() {\n        await this.saveData(this.settings);\n        this.restartPolling();\n    }\n    startPolling() {\n        this.stopPolling();\n        this.scanForImports();\n        this.scanIntervalId = window.setInterval(() => this.scanForImports(), this.settings.scanIntervalSeconds * 1000);\n    }\n    stopPolling() {\n        if (this.scanIntervalId !== null) {\n            clearInterval(this.scanIntervalId);\n            this.scanIntervalId = null;\n        }\n    }\n    restartPolling() {\n        this.startPolling();\n    }\n    async scanForImports() {\n        const folder = this.app.vault.getAbstractFileByPath(this.settings.booxFolder);\n        if (!folder || !(folder instanceof TFolder)) {\n            console.warn(`Boox Sync: Folder not found: ${this.settings.booxFolder}`);\n            return;\n        }\n        for (const file of folder.children) {\n            if (file instanceof TFile && file.extension === \"txt\") {\n                const content = await this.app.vault.read(file);\n                if (content.startsWith(\"Reading Notes\") || content.match(/^<<.+?>>.+/)) {\n                    await parseHighlightFile(this, file);\n                }\n            }\n        }\n    }\n}\n","references":["/Users/muhammad_saadiq/Documents/@L-P/Obsidian/ArRahman/BooxSync-Starter/node_modules/obsidian/obsidian.d.ts","/Users/muhammad_saadiq/Documents/@L-P/Obsidian/ArRahman/BooxSync-Starter/src/settings.ts","/Users/muhammad_saadiq/Documents/@L-P/Obsidian/ArRahman/BooxSync-Starter/src/parser.ts"]}
